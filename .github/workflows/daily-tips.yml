name: Check shell script

on:
  push:
    branched: [ master ]
    paths:
      - 'daily-tips'
  pull_request:
    branches: [ master ]
    # Triggers when the dialy-tips file change.
    paths:
      - 'daily-tips'
jobs:
  # This workflow contain a single job called "Check daily tips".
  daily-tips:
    # OS version.
    runs-on: ubuntu-20.04
    steps:
      # Get source code of the repository.
      - uses: actions/checkout@v2
      # Use shellcheck from action marketplace.
      - name: Check shell scripts
        run: |
          find . \( -name .git \) -prune -o -type f -exec grep -z -l -P '^#![^\r\n]+/bash' '{}' \; | xargs -n 1 -I '{}' bash -n "{}"
      - name: Install shellcheck
        run: |
          sudo apt update
          sudo apt install -y shellcheck
      - name: Check daily tips
        run: |
          shellcheck daily-tips

